{"ast":null,"code":"var _jsxFileName = \"C:\\\\Coding Projects\\\\Pearson_World_Journal\\\\frontend\\\\src\\\\pages\\\\MapPage.tsx\",\n  _s2 = $RefreshSig$();\nimport { MapContainer, TileLayer, Marker, useMapEvents } from 'react-leaflet';\nimport { useEffect, useState } from 'react';\nimport 'leaflet/dist/leaflet.css';\nimport axios from 'axios';\nimport { Icon } from 'leaflet';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Custom waypoint icon\nconst waypointIcon = new Icon({\n  iconUrl: '/point-of-interest.png',\n  iconSize: [30, 30],\n  iconAnchor: [15, 30],\n  popupAnchor: [0, -30]\n});\nexport default function MapPage() {\n  _s2();\n  var _s = $RefreshSig$();\n  const [waypoints, setWaypoints] = useState([]);\n  useEffect(() => {\n    axios.get('/api/waypoints').then(res => setWaypoints(res.data));\n  }, []);\n  const AddWaypoint = () => {\n    _s();\n    useMapEvents({\n      click: async e => {\n        const {\n          lat,\n          lng\n        } = e.latlng;\n        const title = prompt('Optional: Enter a title for this location');\n        const description = prompt('Optional: Enter a description');\n        const imageFile = window.confirm('Do you want to upload an image for this location?') ? await new Promise(resolve => {\n          const input = document.createElement('input');\n          input.type = 'file';\n          input.accept = 'image/*';\n          input.onchange = () => {\n            var _input$files$, _input$files;\n            return resolve((_input$files$ = (_input$files = input.files) === null || _input$files === void 0 ? void 0 : _input$files[0]) !== null && _input$files$ !== void 0 ? _input$files$ : null);\n          };\n          input.click();\n        }) : null;\n        let imageUrl;\n        if (imageFile) {\n          var _res$data$urls;\n          const formData = new FormData();\n          formData.append('images', imageFile);\n          const res = await axios.post('/api/upload', formData, {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }\n          });\n          imageUrl = (_res$data$urls = res.data.urls) === null || _res$data$urls === void 0 ? void 0 : _res$data$urls[0];\n        }\n        const newWaypoint = {\n          lat,\n          lng,\n          title,\n          description,\n          image: imageUrl\n        };\n        axios.post('/api/waypoints', newWaypoint).then(res => {\n          setWaypoints(prev => [...prev, res.data]);\n        });\n      }\n    });\n    return null;\n  };\n  _s(AddWaypoint, \"Ld/tk8Iz8AdZhC1l7acENaOEoCo=\", false, function () {\n    return [useMapEvents];\n  });\n  const center = [20, 0];\n  return /*#__PURE__*/_jsxDEV(MapContainer, {\n    center: center,\n    zoom: 2,\n    style: {\n      height: '100vh'\n    },\n    worldCopyJump: false,\n    maxBounds: [[-90, -180], [90, 180]],\n    maxBoundsViscosity: 1.0,\n    children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n      noWrap: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TileLayer, {\n      url: \"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\",\n      attribution: \"\\xA9 <a href=\\\"https://carto.com/\\\">CARTO</a>\",\n      noWrap: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddWaypoint, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), waypoints.map(wp => /*#__PURE__*/_jsxDEV(Marker, {\n      position: [wp.lat, wp.lng],\n      icon: waypointIcon,\n      eventHandlers: {\n        contextmenu: () => {\n          // eslint-disable-next-line no-restricted-globals\n          if (confirm('Delete this waypoint?')) {\n            axios.delete(`/api/waypoints/${wp._id}`).then(() => {\n              setWaypoints(prev => prev.filter(p => p._id !== wp._id));\n            });\n          }\n        }\n      }\n    }, wp._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n_s2(MapPage, \"9iQLsmPBTa93K3oGnDbf0Cwbt/U=\");\n_c = MapPage;\nvar _c;\n$RefreshReg$(_c, \"MapPage\");","map":{"version":3,"names":["MapContainer","TileLayer","Marker","useMapEvents","useEffect","useState","axios","Icon","jsxDEV","_jsxDEV","waypointIcon","iconUrl","iconSize","iconAnchor","popupAnchor","MapPage","_s2","_s","$RefreshSig$","waypoints","setWaypoints","get","then","res","data","AddWaypoint","click","e","lat","lng","latlng","title","prompt","description","imageFile","window","confirm","Promise","resolve","input","document","createElement","type","accept","onchange","_input$files$","_input$files","files","imageUrl","_res$data$urls","formData","FormData","append","post","headers","urls","newWaypoint","image","prev","center","zoom","style","height","worldCopyJump","maxBounds","maxBoundsViscosity","children","url","noWrap","fileName","_jsxFileName","lineNumber","columnNumber","attribution","map","wp","position","icon","eventHandlers","contextmenu","delete","_id","filter","p","_c","$RefreshReg$"],"sources":["C:/Coding Projects/Pearson_World_Journal/frontend/src/pages/MapPage.tsx"],"sourcesContent":["import { MapContainer, TileLayer, Marker, Popup, useMapEvents, Tooltip } from 'react-leaflet';\r\nimport { useEffect, useState } from 'react';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport axios from 'axios';\r\nimport L, { LatLngExpression, LeafletMouseEvent, Icon } from 'leaflet';\r\n\r\n\r\ninterface Waypoint {\r\n  _id: string;\r\n  lat: number;\r\n  lng: number;\r\n  title?: string;\r\n  description?: string;\r\n  image?: string;\r\n  journalText?: string;\r\n  images?: string[];\r\n}\r\n\r\n// Custom waypoint icon\r\nconst waypointIcon = new Icon({\r\n  iconUrl: '/point-of-interest.png',\r\n  iconSize: [30, 30],\r\n  iconAnchor: [15, 30],\r\n  popupAnchor: [0, -30],\r\n});\r\n\r\nexport default function MapPage() {\r\n  const [waypoints, setWaypoints] = useState<Waypoint[]>([]);\r\n\r\n  useEffect(() => {\r\n    axios.get('/api/waypoints').then(res => setWaypoints(res.data));\r\n  }, []);\r\n\r\n  const AddWaypoint = () => {\r\n    useMapEvents({\r\n      click: async (e: LeafletMouseEvent) => {\r\n        const { lat, lng } = e.latlng;\r\n        const title = prompt('Optional: Enter a title for this location');\r\n        const description = prompt('Optional: Enter a description');\r\n\r\n        const imageFile = window.confirm('Do you want to upload an image for this location?') \r\n          ? await new Promise<File | null>((resolve) => {\r\n              const input = document.createElement('input');\r\n              input.type = 'file';\r\n              input.accept = 'image/*';\r\n              input.onchange = () => resolve(input.files?.[0] ?? null);\r\n              input.click();\r\n            })\r\n          : null;\r\n\r\n        let imageUrl;\r\n        if (imageFile) {\r\n          const formData = new FormData();\r\n          formData.append('images', imageFile);\r\n          const res = await axios.post('/api/upload', formData, {\r\n            headers: { 'Content-Type': 'multipart/form-data' },\r\n          });\r\n          imageUrl = res.data.urls?.[0];\r\n        }\r\n\r\n        const newWaypoint = {\r\n          lat,\r\n          lng,\r\n          title,\r\n          description,\r\n          image: imageUrl,\r\n        };\r\n\r\n        axios.post('/api/waypoints', newWaypoint).then(res => {\r\n          setWaypoints(prev => [...prev, res.data]);\r\n        });\r\n      }\r\n    });\r\n    return null;\r\n  };\r\n\r\n  const center: LatLngExpression = [20, 0];\r\n\r\n  return (\r\n    <MapContainer\r\n      center={center}\r\n      zoom={2}\r\n      style={{ height: '100vh' }}\r\n      worldCopyJump={false}\r\n      maxBounds={[[-90, -180], [90, 180]]}\r\n      maxBoundsViscosity={1.0}\r\n    >\r\n      <TileLayer\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        noWrap={true}\r\n      />\r\n      <TileLayer\r\n        url=\"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\"\r\n        attribution='&copy; <a href=\"https://carto.com/\">CARTO</a>'\r\n        noWrap={true}\r\n      />\r\n      <AddWaypoint />\r\n      {waypoints.map(wp => (\r\n        <Marker\r\n          key={wp._id}\r\n          position={[wp.lat, wp.lng]}\r\n          icon={waypointIcon}\r\n          eventHandlers={{\r\n            contextmenu: () => {\r\n              // eslint-disable-next-line no-restricted-globals\r\n              if (confirm('Delete this waypoint?')) {\r\n                axios.delete(`/api/waypoints/${wp._id}`).then(() => {\r\n                  setWaypoints(prev => prev.filter(p => p._id !== wp._id));\r\n                });\r\n              }\r\n            },\r\n          }}\r\n        >\r\n        </Marker>\r\n      ))}\r\n    </MapContainer>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}